.col-md-4.col-sm-6.col-xs-12
  .x_panel
    .x_title
      %ul.nav.navbar-right.panel_toolbox
        %li.pull-right
          = link_to '', { :action => :destroy, :id_del => actual.id }, :class => 'fa fa-close'
        %li.pull-right
          %a{:class => 'fa fa-cloud-download', :id =>"#{actual.id}-save"}
      = render "stadistics/title", actual:actual
      .clearfix
    .x_content
      /Crear un id nuevo por cada grafico para que cargue los nuevos y cargarlo
      %canvas{:id =>"#{actual.id}-bar"}

- content_for :javascripts do
  :javascript
    Chart.defaults.global.legend = {
        enabled: false
      };
    $("##{actual.id}-save").click(function() {
      document.getElementById("#{actual.id}-bar").toBlob(function(blob) {
          saveAs(blob, "chart_#{actual.id}.png");
      });
    });
    var ctx = document.getElementById("#{actual.id}-bar").getContext("2d");
      var mybarChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: JSON.parse('#{actual.labels}'),
          datasets: [{
            label: 'total',
            backgroundColor: "#26B99A",
            data: JSON.parse('#{actual.value}')
          }]
        },

        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true
              }
            }]
          }
        }
      });



